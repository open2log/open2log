name = "open2log-image-upload"
main = "build/worker/shim.mjs"
compatibility_date = "2024-01-01"

[build]
command = "cargo install -q worker-build && worker-build --release"

[vars]
R2_BUCKET_NAME = "open2log-images"
R2_PUBLIC_URL = "https://images.open2log.com"

# Secrets are configured via wrangler secret put:
# wrangler secret put R2_ACCESS_KEY_ID
# wrangler secret put R2_SECRET_ACCESS_KEY

[[routes]]
pattern = "api.open2log.com/upload/*"
zone_name = "open2log.com"

[observability]
enabled = true
